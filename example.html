<!DOCTYPE html />
<html>
<head>
    <title>EditTable Example</title>
    <style>
        td.disabled {
            background-color: #ccc;
        }
    </style>
</head>
<body>
<h1>EditTable Example</h1>
<p>This shows a basic example of EditTable.</p>
<p>Click any of the table cells below to edit them.  Also try navigating around with the keyboard (tab, shift+tab, up, down).</p>

<table id='my_table' border="1" cellspacing="0" cellpadding="10">
    <thead>
    <tr>
        <th>Name</th>
        <th>Gender</th>
        <th>Description</th>
        <th>Generated Email</th>
    </tr>
    </thead>
    <tr>
        <td>John Smith</td>
        <td>Male</td>
        <td>Famous for having the most popular male fake name.</td>
        <td></td>
    </tr>
    <tr>
        <td>Jane Doe</td>
        <td>Female</td>
        <td>Friend of John Smith.</td>
        <td></td>
    </tr>
    <tr>
        <td>John Doe</td>
        <td>Male</td>
        <td>Husband of Jane Doe and extremely jealous of John Smith.</td>
        <td></td>
    </tr>
</table>

<button id="reset" type="button">Reset</button>
<button id="log" type="button">Console.log</button>
<button id="addrow" type="button">Add Row</button>
<button id="removerow" type="button">Remove Row</button>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src='lib/EditTable.js' type='text/javascript'></script>
<script type='text/javascript'>
    var columns = {
        "Name": {
            formatters: [new EditTable.BoldFormatter()]
        },
        "Gender": {
            editor: "Select",
            options: {
                values: ['Male','Female']
            }
        },
        "Description": {
            editor: "LongText"
        },
        "Generated Email": {
            // Don't allow input for this cell
            disabled: true,
            // Will be called when the cell's value needs to be re-calculated
            value: function(cell) {
                // Get the "Name" cell for this row
                var row = editor.getRow(cell);
                var name = editor.getCell(row,'Name').data('value');
                
                if(!name) return '';
                
                // Generate an email address based on the name
                return name.toLowerCase().replace(/[^a-zA-Z_\-0-9\s\.]/g,'').replace(/\s+/g,'.')+"@example.com";
            },
            // Re-calculates the value when the 'Name' column changes
            watch: ['Name'],
            formatters: [function(value, cell) { cell.addClass('disabled'); return value; }]
        }
    };

    var editor = new EditTable($('#my_table'),columns);

    var original = editor.getRows();

    $('#reset').click(function() {
        editor.setRows(original);
    });

    $('#log').click(function() {
        console.log(JSON.stringify(editor.getRows(),null,2));
    });

    $('#addrow').click(function() {
        editor.addRow();
    });

    $('#removerow').click(function() {
        editor.removeRow();
    });

</script>
</body>
</html>
