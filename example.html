<!DOCTYPE html />
<html>
<head>
    <title>EditTable Example</title>
    <style>
        td.disabled {
            background-color: #ccc;
        }
    </style>
</head>
<body>
<h1>EditTable Example</h1>
<p>This shows a basic example of EditTable.</p>
<p>Click any of the table cells below to edit them.  Also try navigating around with the keyboard (tab, shift+tab, up, down).</p>

<table id='my_table' border="1" cellspacing="0" cellpadding="10">
    <thead>
    <tr>
        <th>Name</th>
        <th>Gender</th>
        <th>Description</th>
        <th>Generated Email</th>
    </tr>
    </thead>
    <tr>
        <td>John Smith</td>
        <td>Male</td>
        <td>Famous for having the most popular male fake name.</td>
        <td>john.smith@example.com</td>
    </tr>
    <tr>
        <td>Jane Doe</td>
        <td>Female</td>
        <td>Friend of John Smith.</td>
        <td>jane.doe@example.com</td>
    </tr>
    <tr>
        <td>John Doe</td>
        <td>Male</td>
        <td>Husband of Jane Doe and extremely jealous of John Smith.</td>
        <td>john.doe@example.com</td>
    </tr>
</table>

<button id="reset" type="button">Reset</button>
<button id="log" type="button">Console.log</button>
<button id="addrow" type="button">Add Row</button>
<button id="removerow" type="button">Remove Row</button>

<script src='lib/jquery-1.8.3.min.js' type='text/javascript'></script>
<script src='lib/EditTable.js' type='text/javascript'></script>
<script type='text/javascript'>
    var columns = {
        "Name": {
            formatters: [new EditTable.BoldColumnFormat()]
        },
        "Gender": {
            editor: "Select",
            options: {
                values: ['Male','Female']
            }
        },
        "Description": {
            editor: "LongText"
        },
        "Generated Email": {
            editor: "Disabled",
            formatters: [new EditTable.ClassColumnFormat({class: 'disabled'})]
        }
    };

    var editor = new EditTable($('#my_table'),columns);

    editor.on('save',function(row,col,data) {
        if(col === 'Name') {
            setting = true;
            var email = data.toLowerCase().replace(/[^a-zA-Z_\-0-9\s\.]/g,'').replace(/\s+/g,'.')+"@example.com";
            var email_cell = editor.getCell(row,'Generated Email');

            editor.setCell(email_cell,email);
        }
    });

    var original = editor.getRows();

    $('#reset').click(function() {
        editor.setRows(original);
    });

    $('#log').click(function() {
        console.log(JSON.stringify(editor.getRows(),null,2));
    });

    $('#addrow').click(function() {
        editor.addRow();
    });

    $('#removerow').click(function() {
        editor.removeRow();
    });

</script>
</body>
</html>
